<html>
   <head>
      <meta charset="utf-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1" />
      <!-- HTML Meta Tags -->
      <title>Hesko | Energo</title>
      <meta name="description" content=":D">
      <!-- Facebook Meta Tags -->
      <meta property="og:url" content="https://hesko.cc">
      <meta property="og:type" content="website">
      <meta property="og:title" content="Hesko | Energo">
      <meta property="og:description" content=":D">
      <meta property="og:image" content="https://opengraph.b-cdn.net/production/images/083bc665-88a5-4ffa-8553-c3903d434efc.png?token=DYsukwGFWC1hLEtgBCVUoQuTCNOaNlbZENx7swdFGUs&height=1200&width=1200&expires=33293578594">
      <!-- Twitter Meta Tags -->
      <meta name="twitter:card" content="summary_large_image">
      <meta property="twitter:domain" content="hesko.cc">
      <meta property="twitter:url" content="https://hesko.cc">
      <meta name="twitter:title" content="Hesko | Energo">
      <meta name="twitter:description" content=":D">
      <meta name="twitter:image" content="https://opengraph.b-cdn.net/production/images/083bc665-88a5-4ffa-8553-c3903d434efc.png?token=DYsukwGFWC1hLEtgBCVUoQuTCNOaNlbZENx7swdFGUs&height=1200&width=1200&expires=33293578594">
      <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Crect width='64' height='64' rx='12' fill='black'/%3E%3Cpath d='M12 40h12l4-16 8 24 6-16h10' stroke='white' stroke-width='4' fill='none'/%3E%3Cpath d='M8 20h16' stroke='%23ff1a1a' stroke-width='4'/%3E%3C/svg%3E" />
      <script defer src="app.js"></script>
      <script defer src="mc.js"></script>
      <style>

          :root{
            --bg:#ffffff; --panel:#111113; --text:#e6e6e8; --muted:#b6b6bb;
            --fonntcolor:#000;
            --font:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Ubuntu,Cantarell,"Noto Sans","Helvetica Neue",Arial,"Apple Color Emoji","Segoe UI Emoji";
          }

          body{ background-color:var(--bg); }
        
         .energo-menu{
         --accent:#e11d2e; --surface:rgba(255,255,255,.04); --border:#1e1f22; --radius:14px;
         --muted:#a4acb9; --radius:16px; --shadow:0 12px 34px rgba(0,0,0,.35);
         }
         @media (prefers-color-scheme:light){
         .energo-menu{ --surface:rgba(255,255,255,.72); --border:rgba(0,0,0,.08); --muted:#6b7280; }
         }
         .energo-menu .card{
         width:min(1000px,92vw); margin:clamp(16px,4vw,40px) auto; padding:18px 18px 22px;
         border-radius:var(--radius); background:linear-gradient(180deg,rgba(255,255,255,.02),transparent 120%),var(--surface);
         border:1px solid var(--border); backdrop-filter:blur(6px) saturate(120%); box-shadow:var(--shadow); position:relative;
         }
         .energo-menu .card::before{
         content:""; position:absolute; left:-1px; right:-1px; top:-1px; height:3px; opacity:.9;
         border-top-left-radius:calc(var(--radius)+2px); border-top-right-radius:calc(var(--radius)+2px);
         background:linear-gradient(90deg,transparent,var(--accent) 20%,var(--accent) 80%,transparent);
         }
         .energo-menu .head{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:12px; }
         .energo-menu .title{ color:var(fontcolor); display:flex; align-items:center; gap:10px; letter-spacing:.2px; font-family:var(--font) }
         .energo-menu .chip{ padding:2px 8px; border-radius:999px; font-size:.78rem;
         border:1px solid color-mix(in oklab, var(--accent) 60%, transparent); color:var(--accent); }
         .energo-menu .updated{ color:var(--accent); font-size:.9rem; }
         .energo-menu .figure{ position:relative; overflow:hidden; border-radius:calc(var(--radius) - 6px);
         background:linear-gradient(180deg,rgba(255,255,255,.04),transparent 120%); display:grid; place-items:center; }
         .energo-menu .figure::after{ content:""; position:absolute; inset:0;
         background:linear-gradient(90deg,transparent,rgba(255,255,255,.08),transparent);
         transform:translateX(-100%); animation:shimmer 1.1s infinite; }
         .energo-menu .figure.loaded::after{ display:none; }
         @keyframes shimmer{ to{ transform:translateX(100%); } }
         .energo-menu .img{ width:100%; height:auto; display:block; cursor:zoom-in; transition:transform .22s ease; }
         .energo-menu .img:hover{ transform:scale(1.007); }
         .energo-menu .actions{ display:flex; justify-content:flex-end; gap:10px; margin-top:12px; }
         .energo-menu .btn{ padding:9px 12px; border-radius:12px; border:1px solid var(--border); background:transparent; color:inherit; text-decoration:none; }
         .energo-menu .btn-accent{ border-color:color-mix(in oklab, var(--accent) 60%, transparent); color:var(--accent); }
         /* Lightbox */
         .menu-lightbox{ position:fixed; inset:0; display:none; place-items:center; z-index:9999;
         background:rgba(0,0,0,.76); backdrop-filter:blur(2px); }
         .menu-lightbox.open{ display:grid; }
         .menu-lightbox__inner{ position:relative; width:min(95vw,1100px); max-height:92vh; }
         .menu-lightbox__img{ width:100%; height:auto; max-height:92vh; display:block; border-radius:14px;
         box-shadow:0 18px 48px rgba(0,0,0,.55); animation:lbIn .16s ease-out; }
         @keyframes lbIn{ from{ transform:scale(.96); opacity:.6; } to{ transform:scale(1); opacity:1; } }
         .menu-lightbox__close{ position:absolute; top:8px; right:8px; border:none; cursor:pointer;
         border-radius:10px; padding:6px 10px; background:rgba(0,0,0,.45); color:#fff; }
         .menu-lightbox__close:focus-visible{ outline:2px solid var(--accent); outline-offset:2px; }
         /* Mobile tweaks */
         @media (max-width:640px){
         .energo-menu .card{ padding:14px; width:min(100%,94vw); }
         .energo-menu .updated{ font-size:.82rem; }
         .energo-menu .title h2{ font-size:1.05rem; }
         .energo-menu .actions{ justify-content:center; }
         }
         
         .energo-menu .card{
           transform: perspective(900px) rotateX(0deg) rotateY(0deg) translateZ(0);
           transition: transform .25s cubic-bezier(.2,.6,.2,1), box-shadow .25s;
           will-change: transform;
         }
         
         .energo-menu .card::after{
           content:"";
           position:absolute; inset:-1px; border-radius:var(--radius); pointer-events:none;
           background:
             radial-gradient(320px 200px at calc(50% + var(--sheen-x,0px)) calc(50% + var(--sheen-y,0px)),
               rgba(255,255,255,.10), rgba(255,255,255,0) 60%);
           opacity: var(--sheen-opacity,0);
           mix-blend-mode: screen;
           transition: opacity .25s;
         }
         

         @media (prefers-reduced-motion: reduce){
           .energo-menu .card{ transition:none; }
           .energo-menu .card::after{ display:none; }
         }


      </style>
   </head>
   <body>
      <section class="energo-menu">
         <div class="card" aria-labelledby="menu-title">
            <div class="head">
               <div class="title">
                  <h2 id="menu-title">Dobrú chuť :D</h2>
               </div>
               <time class="updated" id="menuUpdated" datetime="">Aktualizované — …</time>
            </div>
            <figure class="figure" id="menuFigure">
               <img id="menuImg" class="img" alt="Jedálny lístok" loading="lazy" decoding="async">
            </figure>
            <div class="actions">
               <button class="btn btn-accent" id="zoomBtn" type="button">Zväčšiť</button>
               <a class="btn" id="openFull" href="/assets/menu.jpg" target="_blank" rel="noopener">Otvoriť v plnom</a>
            </div>
         </div>
      </section>
      <!-- Lightbox -->
      <div class="menu-lightbox" id="menuLightbox" aria-modal="true" role="dialog" aria-label="Zväčšený jedálny lístok">
         <div class="menu-lightbox__inner">
            <button class="menu-lightbox__close" id="lbClose" type="button">✕</button>
            <img class="menu-lightbox__img" id="lbImg" alt="">
         </div>
      </div>
      <script>
         (function(){
           const today = new Date().toISOString().slice(0,10);
           const img = document.getElementById('menuImg');
           const fig = document.getElementById('menuFigure');
           const updatedEl = document.getElementById('menuUpdated');
           const fullLink = document.getElementById('openFull');
           const zoomBtn = document.getElementById('zoomBtn');
         
           // načítanie obrázka + skeleton
           img.src = '/assets/menu.jpg?v=' + today;
           function loaded(){ fig.classList.add('loaded'); }
           if (img.complete) loaded(); else img.addEventListener('load', loaded);
           img.addEventListener('error', ()=>{ fig.classList.add('loaded'); img.alt='Nepodarilo sa načítať jedálny lístok.'; });
         
           // info z JSON (z workflowu)
           fetch('/assets/menu.jpg.json', { cache: 'no-store' })
             .then(r=>r.ok?r.json():null)
             .then(d=>{
               const dt = new Date((d && d.fetchedAt) || Date.now());
               updatedEl.dateTime = dt.toISOString();
               updatedEl.textContent = 'Aktualizované — ' + dt.toLocaleString('sk-SK',{dateStyle:'medium',timeStyle:'short'});
               const full = (d && d.img) || '/assets/menu.jpg';
               fullLink.href = full + '?v=' + today;
               // ulož „full“ URL pre lightbox
               img.dataset.full = full + '?v=' + today;
             })
             .catch(()=>{ img.dataset.full = '/assets/menu.jpg?v=' + today; });
         
           // Lightbox / zoom
           const lb = document.getElementById('menuLightbox');
           const lbImg = document.getElementById('lbImg');
           const lbClose = document.getElementById('lbClose');
         
           function openLB(){
             lbImg.src = img.dataset.full || img.src;
             lb.classList.add('open');
             lbClose.focus();
           }
           function closeLB(){
             lb.classList.remove('open');
             lbImg.src = '';
           }
         
           img.addEventListener('click', openLB);
           zoomBtn.addEventListener('click', openLB);
           lb.addEventListener('click', (e)=>{ if (e.target === lb) closeLB(); });
           lbClose.addEventListener('click', closeLB);
           document.addEventListener('keydown', (e)=>{ if (e.key === 'Escape' && lb.classList.contains('open')) closeLB(); });
         })();
      </script>

      <script>
      (function(){
        const card = document.querySelector('.energo-menu .card');
        const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        const isCoarse = window.matchMedia('(pointer: coarse)').matches; // mobily/tablety
      
        if (card && !prefersReduced && !isCoarse) {
          const MAX = 10;      // max uhol v stupňoch
          const SHEEN = 24;    // rozsah posunu odlesku v px
          let rafId = null;
      
          function onMove(e){
            const r = card.getBoundingClientRect();
            const px = (e.clientX - r.left) / r.width;   // 0..1
            const py = (e.clientY - r.top)  / r.height;  // 0..1
            const rx = (0.5 - py) * (MAX * 2);           // rotateX
            const ry = (px - 0.5) * (MAX * 2);           // rotateY
            const sx = (px - 0.5) * SHEEN;               // sheen X
            const sy = (py - 0.5) * SHEEN;               // sheen Y
      
            cancelAnimationFrame(rafId);
            rafId = requestAnimationFrame(()=>{
              card.style.transform = `perspective(900px) rotateX(${rx.toFixed(2)}deg) rotateY(${ry.toFixed(2)}deg) translateZ(0)`;
              card.style.setProperty('--sheen-x', `${sx.toFixed(1)}px`);
              card.style.setProperty('--sheen-y', `${sy.toFixed(1)}px`);
              card.style.setProperty('--sheen-opacity', '1');
            });
          }
      
          function reset(){
            cancelAnimationFrame(rafId);
            card.style.transform = 'perspective(900px) rotateX(0deg) rotateY(0deg) translateZ(0)';
            card.style.setProperty('--sheen-opacity', '0');
          }
      
          card.addEventListener('pointermove', onMove);
          card.addEventListener('pointerleave', reset);
          card.addEventListener('pointerdown', reset); // aby klik neškubol
        }
      })();
      </script>


   </body>
</html>
