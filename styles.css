:root{
  --bg:#0c0c0d; --panel:#111113; --text:#e6e6e8; --muted:#b6b6bb;
  --accent:#e11d2e; --accent-700:#960b17; --border:#1e1f22; --radius:14px;
  --shadow:0 10px 30px rgba(0,0,0,.35);
  --font:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Ubuntu,Cantarell,"Noto Sans","Helvetica Neue",Arial,"Apple Color Emoji","Segoe UI Emoji";
}
*{box-sizing:border-box} html,body{height:100%}
body{margin:0;background:linear-gradient(180deg,#0a0a0a 0%,#0e0e10 100%);color:var(--text);font-family:var(--font);line-height:1.5;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility}
.container{max-width:1100px;margin:0 auto;padding:0 18px}

/* Header */
header{position:sticky;top:0;z-index:50;backdrop-filter:saturate(1.1) blur(8px);background:rgba(12,12,13,.7);border-bottom:1px solid var(--border)}
.nav{display:flex;align-items:center;gap:16px;height:64px}
.brand{display:flex;align-items:center;gap:10px;margin-right:auto}
.logo{width:28px;height:28px;border-radius:8px;display:grid;place-items:center;background:black;box-shadow:inset 0 0 0 1px #222}
.logo svg{width:18px;height:18px}
.title{font-weight:800;letter-spacing:.2px}
.tabs{display:flex;gap:8px;flex-wrap:wrap}
.tab{padding:10px 14px;border:1px solid var(--border);border-radius:999px;background:linear-gradient(180deg,#141416,#101013);box-shadow:var(--shadow);font-weight:600;opacity:.95;text-decoration:none;color:inherit}
.tab[aria-current="page"],.tab:hover{border-color:var(--accent);box-shadow:0 0 0 2px rgba(225,29,46,.18)}
.actions{margin-left:auto}
.btn{display:inline-flex;align-items:center;gap:10px;padding:10px 12px;border-radius:10px;border:1px solid var(--accent);background:linear-gradient(180deg,var(--accent),var(--accent-700));font-weight:800;letter-spacing:.2px;color:white;cursor:pointer}
.btn.small{padding:8px 12px}
.btn.ghost{border-color:#2b2b2f;background:linear-gradient(180deg,#131315,#101013);color:var(--text);font-weight:700}
.btn.ghost:hover{border-color:var(--accent)}

/* Hero */
.hero{padding:56px 0 24px}
.hero-wrap{display:grid;grid-template-columns:1.1fr .9fr;gap:28px}
@media (max-width:900px){.hero-wrap{grid-template-columns:1fr}}
.hero-card{background:radial-gradient(1200px 400px at -20% -30%, rgba(225,29,46,.12), transparent 60%),radial-gradient(800px 300px at 120% 120%, rgba(225,29,46,.08), transparent 60%),linear-gradient(180deg,#111113,#0f0f11);border:1px solid var(--border);border-radius:var(--radius);padding:28px;box-shadow:var(--shadow)}
.hero h1{font-size:clamp(26px,3vw,36px);margin:0 0 8px;letter-spacing:.3px}
.hero p{color:var(--muted);margin:0 0 18px}
.quick{display:flex;gap:8px;flex-wrap:wrap}
.chip{display:inline-flex;align-items:center;gap:8px;padding:10px 12px;border:1px dashed #2a2b2f;border-radius:12px;background:linear-gradient(180deg,#131315,#101013);font-size:14px;color:#e9e9ea;cursor:pointer;transition:transform .12s ease}
.chip:hover{transform:translateY(-1px);border-color:var(--accent)}
.bullets{margin:8px 0 0 18px;color:var(--muted)}

/* Sections / cards */
section{padding:26px 0 56px}
.card{background:linear-gradient(180deg,#111113,#0f0f11);border:1px solid var(--border);border-radius:var(--radius);padding:20px;box-shadow:var(--shadow)}
.section-title{display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:14px}
.section-title h2{margin:0;font-size:22px}
.toolbar{display:flex;flex-wrap:wrap;gap:10px}
.select,.input{appearance:none;background:#121215;border:1px solid var(--border);color:var(--text);border-radius:10px;padding:10px 12px;font-weight:600}
.select:focus,.input:focus{outline:none;box-shadow:0 0 0 3px rgba(225,29,46,.25);border-color:var(--accent)}
.input{min-width:220px}

/* Toggle group */
.toggles{display:flex;gap:6px}
.toggle{padding:10px 12px;border-radius:10px;border:1px solid #2b2b2f;background:linear-gradient(180deg,#131315,#101013);color:var(--text);font-weight:700;cursor:pointer}
.toggle[aria-pressed="true"],.toggle:hover{border-color:var(--accent)}

/* Notes grid */
.notes-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;margin-top:16px}
@media (max-width:1000px){.notes-grid{grid-template-columns:repeat(2,1fr)}}
@media (max-width:640px){.notes-grid{grid-template-columns:1fr}}
.note{position:relative;overflow:hidden}
.note h3{margin:0 0 8px;font-size:16px}
.note .meta{font-size:12px;color:var(--muted);margin-bottom:8px}
.tag{display:inline-block;font-size:11px;padding:6px 8px;border-radius:999px;border:1px solid #2b2b2f;background:#121215;margin-right:6px}
.empty{border:1px dashed #333;background:repeating-linear-gradient(45deg, rgba(225,29,46,.06), rgba(225,29,46,.06) 10px, transparent 10px, transparent 20px);padding:28px;text-align:center;color:var(--muted);border-radius:var(--radius)}

/* Contact */
.columns{display:grid;grid-template-columns:1fr 380px;gap:18px}
@media (max-width:980px){.columns{grid-template-columns:1fr}}
.list{display:grid;gap:10px}
.list a,.list-row{display:flex;align-items:center;justify-content:space-between;gap:16px;padding:14px 16px;border:1px solid var(--border);border-radius:12px;background:linear-gradient(180deg,#131315,#101013);text-decoration:none;color:inherit}
.list a:hover{border-color:var(--accent)}

/* Footer */
footer{border-top:1px solid var(--border);padding:26px 0 40px;color:#d9d9db}
footer .sig{display:flex;align-items:center;gap:10px;font-weight:800}
.bolt{width:16px;height:16px;color:var(--accent)}
.foot{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
.copy{color:var(--muted);font-size:13px}

/* Upload dialog */
#uploadDialog{border:none;border-radius:16px;width:min(640px,94vw);padding:0;background:transparent}
#uploadDialog::backdrop{background:rgba(0,0,0,.6);backdrop-filter:blur(2px)}
#uploadForm{background:linear-gradient(180deg,#111113,#0f0f11);border:1px solid var(--border);border-radius:16px;padding:18px}
#uploadForm h3{margin:0 0 6px}
.field{display:grid;gap:6px;margin:10px 0}
.field input[type="text"], .field input[type="file"], .field select{background:#121215;border:1px solid var(--border);color:var(--text);border-radius:10px;padding:10px 12px;font-weight:600}
.grid2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
@media (max-width:520px){.grid2{grid-template-columns:1fr}}
.dialog-actions{display:flex;justify-content:flex-end;gap:10px;margin-top:6px}
.hidden{display:none}
.muted{color:var(--muted)}
.tiny{font-size:12px}
.hide{display:none!important}

/* Readable dark controls + placeholder + autofill */
.field input, .field select, .input, .select {color:var(--text); caret-color:var(--text); color-scheme:dark;}
.field input::placeholder, .input::placeholder {color:var(--muted); opacity:.9;}
.field input:-webkit-autofill{ -webkit-text-fill-color:var(--text); transition: background-color 9999s ease-in-out 0s; box-shadow:0 0 0px 1000px #121215 inset !important; caret-color:var(--text);}
select, .select { background-color:#121215; color:var(--text); }
select option { background-color:#121215; color:var(--text); }

/* File input button */
input[type="file"]::-webkit-file-upload-button,
input[type="file"]::file-selector-button {
  border:1px solid var(--accent);
  background:linear-gradient(180deg,var(--accent),var(--accent-700));
  color:#fff;border-radius:10px;padding:8px 12px;margin-right:10px;cursor:pointer
}
input[type="file"]::-webkit-file-upload-button:hover,
input[type="file"]::file-selector-button:hover { filter:brightness(1.05) }

/* Headings always light */
h1,h2,h3,h4,h5,h6{color:var(--text)}

/* Labels light */
label, .field{color:var(--text)}
.field *:not(input):not(select):not(textarea):not(button){color:inherit}

/* Grouping by class (sections) */
.group{margin-top:22px}
.group-title{font-size:18px;font-weight:800;margin:10px 0 8px;padding:6px 10px;border:1px solid var(--border);border-radius:10px;display:inline-flex;align-items:center;gap:6px;background:linear-gradient(180deg,#131315,#101013)}
.group-title .count{font-weight:700;color:var(--muted);margin-left:6px;font-size:14px}
.group-sep{height:1px;margin:18px 0;background:linear-gradient(90deg,transparent,#2b2c31 20%,#2b2c31 80%,transparent)}

/* Layout fix: parent wrapper should not be a grid */
#notesWrap{ display:block !important; }
#notesWrap .group{ margin-bottom:22px; }
#notesWrap .group:last-child{ margin-bottom:0; }


/* ===== Responsive/mobile tweaks ===== */

/* Container breathing room on tiny screens */
@media (max-width: 420px){
  .container{padding:0 12px}
}

/* Header layout: allow wrapping and safe spacing */
@media (max-width: 860px){
  .nav{flex-wrap:wrap; gap:10px; height:auto; padding:10px 0}
  .actions{margin-left:0}
}

/* Tabs: horizontal scroll on small screens, avoid wrapping to 2 lines */
.tabs{max-width:100%; overflow-x:auto; -webkit-overflow-scrolling:touch}
.tabs::-webkit-scrollbar{display:none}

/* Hero cards: tighten padding on small screens */
@media (max-width: 560px){
  .hero-card{padding:18px}
  .hero{padding:32px 0 14px}
}

/* Notes toolbar: stack controls on mobile */
@media (max-width: 760px){
  .toolbar{display:grid; grid-template-columns:1fr; gap:8px}
  .toggles{order:-1; justify-content:flex-start; flex-wrap:wrap; gap:6px}
  .select,.input{width:100%; min-width:0}
  .btn.ghost{width:100%}
}

/* Notes groups grid: 1 column on small screens (already 640px, keep consistent) */
@media (max-width: 700px){
  .notes-grid{grid-template-columns:1fr}
}

/* Contact columns already collapse at 980px; ensure iframe height fits phones */
@media (max-width: 520px){
  iframe{height:380px!important}
}

/* Upload dialog: make fields comfy on phones */
@media (max-width: 520px){
  #uploadForm{padding:14px}
  .dialog-actions{flex-direction:column; align-items:stretch}
  .dialog-actions .btn{width:100%}
}

/* Footer: stack nicely */
@media (max-width: 540px){
  .foot{flex-direction:column; align-items:flex-start; gap:8px}
}


/* ===== Mobile header polish ===== */
@media (max-width: 860px){
  header{border-bottom:1px solid var(--border); box-shadow:0 8px 18px rgba(0,0,0,.22)}
  .nav{
    display:grid; 
    grid-template-columns:1fr auto; 
    grid-template-areas:
      "brand brand"
      "tabs  action";
    align-items:center;
    gap:10px;
    row-gap:8px;
    height:auto;
    padding:10px 0 env(safe-area-inset-bottom, 0);
  }
  .brand{grid-area:brand}
  .actions{grid-area:action; margin-left:0; justify-self:end}
  .tabs{
    grid-area:tabs;
    display:flex; gap:8px; 
    overflow-x:auto; 
    padding:2px 2px 6px;
    -webkit-overflow-scrolling:touch;
    scrollbar-width:none;
  }
  .tabs::-webkit-scrollbar{display:none}
  .tab{white-space:nowrap}
  .logo{width:24px;height:24px}
  .title{font-size:18px}
  .btn.small{padding:8px 10px}
}
/* Even narrower phones */
@media (max-width: 420px){
  .title{font-size:16px}
  .btn.small{padding:8px 10px;font-size:14px}
}


/* ===== Notes toolbar mobile polish ===== */
@media (max-width: 860px){
  /* Put heading on its own row, toolbar under it */
  .section-title{flex-direction:column; align-items:flex-start; gap:10px}
  .section-title h2{margin:0}

  /* Stack filters full-width with comfy spacing */
  .toolbar{display:grid; grid-template-columns:1fr; gap:10px; width:100%}
  .select,.input{width:100%; min-width:0}
  .btn.ghost{width:100%; justify-content:center}

  /* Toggle chips wrap nicely */
  .toggles{flex-wrap:wrap; gap:8px}
  .toggle{padding:9px 12px}
}


/* ===== Mobile header stability fix ===== */
@media (max-width: 860px){
  header{z-index:40}
  .nav{position:relative}
  .tabs{
    align-items:center;
    height:44px;
    min-height:44px;
    overflow-x:auto;
    overflow-y:hidden;
    padding:4px 2px 8px;
  }
  .tab{flex:0 0 auto; line-height:1; padding:10px 14px;}
  /* keep action button vertically centered */
  .actions{align-self:center}
}
